{"CLs":[{"__type":"FB","In":[{"__type":"PF","Arg":"In"},{"__type":"PRM","Arg":"PT","Type":"TIME","Var":"T#10s"}],"Ix":2,"Name":"TON","Out":[{"__type":"PF","Arg":"Q"},{"__type":"PRM","Arg":"ET","Ix":1,"Type":"TIME","Var":""}],"Var":"MQTT_AtPowerON_Delay"}],"CMT":"# BROKER\u000d\u000aDélai de connexion à la mise sous tension","LRI":3,"RRI":4,"VLs":[]}
{"CLs":[{"__type":"IST","EID":"ef80504a-c0ad-45f7-9a22-d3af5d6e8ec1","H":191.60000000000002,"TXT":"FB_MQTTClient.Host:='192.168.1.100';\u000d\u000aFB_MQTTClient.ServerPort:=1883;\u000d\u000aFB_MQTTClient.ClientID:='NX1P2';\u000d\u000aFB_MQTTClient.KeepAlive:=60;\u000d\u000aFB_MQTTClient.CleanSession:=TRUE;\u000d\u000a\/\/FB_MQTTClient.WillConfig:=\u000d\u000aUserLogin.User:='simfra';\u000d\u000aUserLogin.Password:='simfra2025';\u000d\u000a","W":533.5999999999998}],"CMT":"Configuration de la connexion","LRI":1,"RRI":2,"VLs":[]}
{"CLs":[{"__type":"LD","Var":"MQTT_Connection_test"},{"__type":"FB","In":[{"__type":"PF","Arg":"Enable"},{"__type":"PRM","Arg":"Host","Ix":1,"Type":"STRING[256]","Var":""},{"__type":"PRM","Arg":"ServerPort","Ix":2,"Type":"UINT","Var":""},{"__type":"PRM","Arg":"ClientID","Ix":3,"Type":"STRING[128]","Var":""},{"__type":"PRM","Arg":"KeepAlive","Ix":4,"Type":"UINT","Var":""},{"__type":"PRM","Arg":"CleanSession","Ix":5,"Type":"BOOL","Var":""},{"__type":"PRM","Arg":"WillConfig","Ix":6,"Type":"MQTT\\WillCnfg","Var":""},{"__type":"PRM","Arg":"UserLogin","Ix":7,"Type":"MQTT\\Login","Var":"UserLogin"},{"__type":"PRM","Arg":"BufferIn","IO":true,"Ix":8,"Type":"MQTT\\ClientBuffer","Var":"BufferIn"}],"Ix":15,"Name":"\\\\MQTT\\MQTTClient","Out":[{"__type":"PF","Arg":"Connected"},{"__type":"PRM","Arg":"Busy","Ix":9,"Type":"BOOL","Var":"FB_MQTTClient_Busy"},{"__type":"PRM","Arg":"SocketID","Ix":10,"Type":"_sSOCKET","Var":"FB_MQTTClient_SocketID"},{"__type":"PRM","Arg":"Error","Ix":11,"Type":"BOOL","Var":"FB_MQTTClient_Error"},{"__type":"PRM","Arg":"ErrorID","Ix":12,"Type":"WORD","Var":"FB_MQTTClient_ErrorID"},{"__type":"PRM","Arg":"ErrorIDEx","Ix":13,"Type":"DWORD","Var":"FB_MQTTClient_ErrorIDEx"},{"__type":"PRM","Arg":"BufferIn","IO":true,"Ix":14,"Type":"MQTT\\ClientBuffer","Var":"BufferIn"}],"UD":true,"X":1,"Var":"FB_MQTTClient"}],"CMT":"Connexion","LRI":16,"RRI":17,"VLs":[]}
{"CLs":[{"__type":"LD","Var":"FB_MQTTClient.Connected"},{"__type":"FB","In":[{"__type":"PF","Arg":"Enable"},{"__type":"PRM","Arg":"Buffer","IO":true,"Ix":1,"Type":"MQTT\\ClientBuffer","Var":"BufferIn"},{"__type":"PRM","Arg":"PingTime","Ix":2,"Type":"UINT","Var":"30000"},{"__type":"PRM","Arg":"TimeOut","Ix":3,"Type":"UINT","Var":"5000"}],"Ix":11,"Name":"\\\\MQTT\\MQTTPing","Out":[{"__type":"PF","Arg":"PingStatus"},{"__type":"PRM","Arg":"Buffer","IO":true,"Ix":4,"Type":"MQTT\\ClientBuffer","Var":"BufferIn"},{"__type":"PRM","Arg":"Response","Ix":5,"Type":"UINT","Var":"FB_MQTTPing_ResponseTime"},{"__type":"PRM","Arg":"Busy","Ix":6,"Type":"BOOL","Var":"FB_MQTTPing_Busy"},{"__type":"PRM","Arg":"PingRESP","Ix":7,"Type":"BOOL","Var":"FB_MQTTPing_PingRESP"},{"__type":"PRM","Arg":"Error","Ix":8,"Type":"BOOL","Var":"FB_MQTTPing_Error"},{"__type":"PRM","Arg":"ErrorID","Ix":9,"Type":"WORD","Var":"FB_MQTTPing_ErrorID"},{"__type":"PRM","Arg":"ErrorIDEx","Ix":10,"Type":"DWORD","Var":"FB_MQTTPing_ErrorIDEx"}],"UD":true,"X":1,"Var":"FB_MQTTPing"}],"CMT":"Vérifie périodiquement si la liaison est active","LRI":12,"RRI":13,"VLs":[]}
{"CLs":[{"__type":"LD","Var":"FB_MQTTClient.Connected"},{"__type":"FB","In":[{"__type":"PF","Arg":"Enable"},{"__type":"PRM","Arg":"Topic","Ix":1,"Type":"STRING[128]","Var":"'zigbee2mqtt\/Aqara_sensor1'"},{"__type":"PRM","Arg":"QoS","Ix":2,"Type":"BYTE","Var":"0"},{"__type":"PRM","Arg":"Message","IO":true,"Ix":3,"Type":"STRING[1986]","Var":"strAqara_sensor1"},{"__type":"PRM","Arg":"Buffer","IO":true,"Ix":4,"Type":"MQTT\\ClientBuffer","Var":"BufferIn"},{"__type":"PRM","Arg":"RcvTopic","IO":true,"Ix":5,"Type":"STRING[128]","Var":"RcvTopicAqara_sensor1"}],"Ix":16,"Name":"\\\\MQTT\\MQTTSubscribe","Out":[{"__type":"PF","Arg":"Subscribed"},{"__type":"PRM","Arg":"Done","Ix":6,"Type":"BOOL","Var":"FB_MQTTSub_Aqara_sensor1_Done"},{"__type":"PRM","Arg":"Busy","Ix":7,"Type":"BOOL","Var":"FB_MQTTSub_Aqara_sensor1_Busy"},{"__type":"PRM","Arg":"Message","IO":true,"Ix":8,"Type":"STRING[1986]","Var":"strAqara_sensor1"},{"__type":"PRM","Arg":"Buffer","IO":true,"Ix":9,"Type":"MQTT\\ClientBuffer","Var":"BufferIn"},{"__type":"PRM","Arg":"RcvTopic","IO":true,"Ix":10,"Type":"STRING[128]","Var":"RcvTopicAqara_sensor1"},{"__type":"PRM","Arg":"PacketID","Ix":11,"Type":"UINT","Var":"FB_MQTTSub_Aqara_sensor1_PacketID"},{"__type":"PRM","Arg":"Error","Ix":12,"Type":"BOOL","Var":"FB_MQTTSub_Aqara_sensor1_Error"},{"__type":"PRM","Arg":"ErrorID","Ix":13,"Type":"WORD","Var":"FB_MQTTSub_Aqara_sensor1_ErrorID"},{"__type":"PRM","Arg":"ErrorIDEx","Ix":14,"Type":"DWORD","Var":"FB_MQTTSub_Aqara_sensor1_ErrorIDEx"},{"__type":"PRM","Arg":"Size","Ix":15,"Type":"UINT","Var":"FB_MQTTSub_Aqara_sensor1_Size"}],"UD":true,"X":1,"Var":"FB_MQTTSub_Aqara_sensor1"}],"CMT":"# Sensor 1\u000d\u000aSouscription au topic","LRI":17,"RRI":18,"VLs":[]}
{"CLs":[{"__type":"IST","EID":"21d6ba6c-49db-48b1-a1d0-891c1ea869f3","H":370.80000000000018,"TXT":"\/\/ Température (-20 à +50°C)\u000d\u000aTemp_sensor1:=STRING_TO_REAL(MID(strAqara_sensor1,5,FIND(strAqara_sensor1,'temperature')+13));\u000d\u000a\u000d\u000a\/\/ Humidité relative (0 à 100% HR)\u000d\u000aHum_sensor1:=STRING_TO_REAL(MID(strAqara_sensor1,5,FIND(strAqara_sensor1,'humidity')+10));\u000d\u000a\u000d\u000a\/\/ Pression atmosphérique en hPa (300 à 1100 hPa)\u000d\u000aPress_sensor1:=STRING_TO_REAL(MID(strAqara_sensor1,5,FIND(strAqara_sensor1,'pressure')+10));\u000d\u000a\u000d\u000a\/\/ Tension de la pile (mV)\u000d\u000aVolt_sensor1:=STRING_TO_REAL(MID(strAqara_sensor1,4,FIND(strAqara_sensor1,'voltage')+9));\u000d\u000a\u000d\u000a\/\/ Niveau de charge de la pile (0 à 100%)\u000d\u000aBatt_sensor1:=STRING_TO_REAL(MID(strAqara_sensor1,2,FIND(strAqara_sensor1,'battery')+9));\u000d\u000a\u000d\u000a\/\/ Qualité de la connexion (0-255)\u000d\u000aLinkQ_sensor1:=STRING_TO_REAL(MID(strAqara_sensor1,3,FIND(strAqara_sensor1,'linkquality')+13));\u000d\u000a","W":896.79999999999984}],"CMT":"Extraction des données","LRI":1,"RRI":2,"VLs":[]}
