<StructuredTextModel xmlns="http://schemas.datacontract.org/2004/07/Omron.Cxap.Modules.StructuredText.Core" xmlns:i="http://www.w3.org/2001/XMLSchema-instance"><Text>// Résolution du CAN&#xD;
Resolution:=4000;&#xD;
&#xD;
IF Enable THEN&#xD;
	(* Mise à l'échelle pour obtenir des degrés Celsius *)&#xD;
	Température:= (101.0*(INT_TO_REAL(EntréeAnalogique)/Resolution))-23.0;&#xD;
&#xD;
	(* Base de temps au quart d'heure *)&#xD;
	IF Get1minClk() AND NOT Front1 THEN&#xD;
		Front1:= TRUE;&#xD;
		IF Minute&gt;=15 THEN&#xD;
			Sampling:=TRUE;&#xD;
			Minute:= 1;&#xD;
		ELSE&#xD;
			Sampling:=FALSE;&#xD;
			Minute:= Minute+1;&#xD;
		END_IF;&#xD;
	END_IF;&#xD;
&#xD;
	IF NOT Get1minClk() THEN&#xD;
		Front1:= FALSE;&#xD;
	END_IF;&#xD;
&#xD;
	(* Range la température en tête de pile, tous les quarts d'heure sur 24 heures (96 x quarts d'heure) *)&#xD;
	IF Sampling AND NOT Front2 THEN&#xD;
		&#xD;
		Front2:= TRUE;&#xD;
		(* Pousse la pile et libère l'en-tête (emplacement 0) *)&#xD;
		FOR index1:= 94 TO 0 BY -1 DO&#xD;
			Pile[index1+1]:= Pile[index1];&#xD;
		END_FOR;&#xD;
&#xD;
		(* Range la température *)&#xD;
		Pile[0]:=Température;&#xD;
		&#xD;
		(* Calcule la tendance *)&#xD;
		IF Pile[0]&gt;Pile[1] THEN&#xD;
			Tendance:= 1;&#xD;
		ELSIF  Pile[0]&lt;Pile[1] THEN&#xD;
			Tendance:= -1;&#xD;
		ELSE&#xD;
			Tendance:= 0;&#xD;
		END_IF;&#xD;
		&#xD;
		(* Parcourt la pile pour rechercher les températures maximale et minimale et la moyenne sur les dernières 24 heures *)&#xD;
		TempératureMIN:= Pile[0];&#xD;
		TempératureMAX:= Pile[0];&#xD;
		Moyenne:= 0.0;&#xD;
		FOR index2 := 0 TO 95 DO&#xD;
			Moyenne:= Moyenne+Pile[index2];&#xD;
			IF Pile[index2]&lt;TempératureMIN THEN&#xD;
				TempératureMIN:= Pile[index2];&#xD;
			ELSIF Pile[index2]&gt;TempératureMAX THEN&#xD;
				TempératureMAX:= Pile[index2];&#xD;
			END_IF;&#xD;
		END_FOR;&#xD;
		Moyenne:= Moyenne/96.0;&#xD;
	END_IF;&#xD;
&#xD;
	IF Minute&lt;&gt;1 THEN&#xD;
		Front2:= FALSE;&#xD;
	END_IF;&#xD;
	&#xD;
ELSE&#xD;
	Température:=0.0;&#xD;
	TempératureMIN:=0.0;&#xD;
	TempératureMAX:=0.0;&#xD;
	Moyenne:=0.0;&#xD;
	Tendance:=0;&#xD;
END_IF;&#xD;
</Text></StructuredTextModel>